@{
    ViewData["Title"] = "Hurtigregistrering";
}

<link rel="stylesheet" href="~/css/pilot/quick-register.css" />

<div class="quick-register-container">
    <div id="quick-register-map"
         data-quick-register-url="@Url.Action("QuickRegisterApi", "Pilot")"
         data-register-type-url="@Url.Action("MyRegistrations", "Pilot")"></div>
</div>

<div class="status-overlay" id="status-overlay">
    <div class="status-box">
        <div id="loading-state">
            <div class="icon">ğŸ“</div>
            <h2>Finner lokasjonen din</h2>
            <p>Vennligst tillat tilgang til posisjon for Ã¥ raskt registrere denne hindringen.</p>
            <div class="spinner"></div>
            <p style="font-size: 14px; color: #9ca3af;">Dette kan ta noen sekunder...</p>
        </div>

        <div id="success-state" class="hidden">
            <div class="icon success-icon">âœ“</div>
            <h2>Lokasjonen din lagret!</h2>
            <p>GPS-posisjonen din er lagret. Du kan fullfÃ¸re detaljene senere fra Mine registreringer.</p>
            <p class="redirect-timer">Omdirigerer om <span id="countdown">3</span> sekunder...</p>
            <div style="margin-top: 30px;">
                <a href="@Url.Action("RegisterType", "Pilot")" class="action-btn">Fortsett nÃ¥</a>
            </div>
        </div>

        <div id="error-state" class="hidden">
            <div class="icon error-icon">âœ—</div>
            <h2 class="error-text">Problem med stedstilgang</h2>
            <p id="error-message">Vi kunne ikke fÃ¥ tak i posisjonen din.</p>

            <div class="help-text">
                <strong>ğŸ’¡ Common Solutions:</strong>
                <ul>
                    <li><strong>Using IP address?</strong> Try <code>localhost</code> instead</li>
                    <li><strong>Check browser settings:</strong> Allow location for this site</li>
                    <li><strong>HTTPS required:</strong> Location only works on localhost or HTTPS</li>
                    <li><strong>Alternative:</strong> Use Full Register to manually choose location</li>
                </ul>
            </div>

            <div style="margin-top: 30px;">
                <button id="btn-retry-location" class="action-btn">ğŸ”„ PrÃ¸v igjen</button>
                <a href="@Url.Action("FullRegister", "Pilot")" class="action-btn secondary">ğŸ“ Bruk full register</a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="~/lib/leaflet/leaflet.css" />
    <script src="~/lib/leaflet/leaflet.js"></script>
    <script src="~/js/pilot/quick-register.js"></script>
}
