@using FirstWebApplication.Helpers
@{
    ViewData["Title"] = "Map View";
}

@section Head {
    <link rel="stylesheet" href="~/css/registerforer/mapview.css" asp-append-version="true" />
}

<div id="loading-overlay" class="loading-overlay">
    <div class="spinner"></div>
    <p class="text-gray-500 font-medium">Loading obstacles...</p>
</div>

<div id="map-container">
    <div id="map"></div>
</div>

<div class="map-sidebar">
    <h2 style="font-size: 24px; font-weight: bold; color: #1f2937; margin-bottom: 20px;">
        ğŸ—ºï¸ Obstacle Map View
    </h2>

    <div class="stats-panel">
        <h3 style="margin: 0 0 15px 0; font-size: 18px;">ğŸ“Š Statistics</h3>
        <div class="stat-item">
            <span>Total Obstacles:</span>
            <span class="stat-value" id="stat-total">0</span>
        </div>
        <div class="stat-item">
            <span>âœ… Approved:</span>
            <span class="stat-value" id="stat-approved">0</span>
        </div>
        <div class="stat-item">
            <span>â³ Pending:</span>
            <span class="stat-value" id="stat-pending">0</span>
        </div>
        <div class="stat-item">
            <span>âŒ Rejected:</span>
            <span class="stat-value" id="stat-rejected">0</span>
        </div>
    </div>

    <div class="search-box">
        <input type="text" id="search-input" class="search-input" placeholder="ğŸ” Search by obstacle name..." />
    </div>

    <div class="filter-section" id="type-filter-section">
        <h3>ğŸ—ï¸ Filter by Type</h3>
        <div class="filter-option">
            <input type="checkbox" id="filter-type-all" checked>
            <label for="filter-type-all">All Types</label>
        </div>
        <!-- Dynamiske type-filtre legges til her av JavaScript -->
    </div>

    <div class="filter-section">
        <h3>ğŸ“‹ Filter by Status</h3>
        <div class="filter-option">
            <input type="checkbox" id="filter-status-approved" checked>
            <label for="filter-status-approved">Approved</label>
            <span class="color-indicator color-green"></span>
        </div>
        <div class="filter-option">
            <input type="checkbox" id="filter-status-pending" checked>
            <label for="filter-status-pending">Pending</label>
            <span class="color-indicator color-yellow"></span>
        </div>
        <div class="filter-option">
            <input type="checkbox" id="filter-status-rejected" checked>
            <label for="filter-status-rejected">Rejected</label>
            <span class="color-indicator color-red"></span>
        </div>
    </div>

    <button class="reset-btn" id="reset-filters-btn">
        ğŸ”„ Reset All Filters
    </button>

    <a asp-action="RegisterforerDashboard" class="block mt-4 text-center text-blue-600 font-medium hover:underline">
        â† Back to Dashboard
    </a>
</div>

@section Scripts {
    <!-- Configuration for mapview.js -->
    <script @Html.Raw(Html.NonceAttribute())>
        window.mapViewConfig = {
            getObstaclesUrl: '@Url.Action("GetObstaclesForMapView", "Registerforer")',
            viewObstacleUrl: '@Url.Action("ViewObstacle", "Registerforer")'
        };
    </script>
    <script src="~/js/registerforer/mapview.js" asp-append-version="true"></script>
}
